{% extends "base.html" %}

{% block title %}Edit Policy #{{ policy.policy_number }}{% endblock %}

{% block content %}
    <h2>Edit Policy: #{{ policy.policy_number }}</h2>
    <form method="POST" action="{{ url_for('edit_policy', policy_id=policy.id) }}">
        <div>
            <label for="policy_number">Policy Number:</label>
            <input type="text" id="policy_number" name="policy_number" value="{{ policy.policy_number }}" readonly>
            <small>(Policy number cannot be changed)</small>
        </div>
        <div>
            <label for="policy_type">Policy Type:</label>
            <select id="policy_type" name="policy_type" required>
                <option value="Auto" {% if policy.policy_type == 'Auto' %}selected{% endif %}>Auto</option>
                <option value="Health" {% if policy.policy_type == 'Health' %}selected{% endif %}>Health</option>
                <option value="Life" {% if policy.policy_type == 'Life' %}selected{% endif %}>Life</option>
                <option value="Home" {% if policy.policy_type == 'Home' %}selected{% endif %}>Home</option>
                <option value="Travel" {% if policy.policy_type == 'Travel' %}selected{% endif %}>Travel</option>
            </select>
        </div>
        <div>
            <label for="coverage_amount">Coverage Amount ($):</label>
            <input type="number" id="coverage_amount" name="coverage_amount" step="0.01" value="{{ policy.coverage_amount }}" required>
        </div>
        <div>
            <label for="premium_amount">Premium Amount ($):</label>
            <input type="number" id="premium_amount" name="premium_amount" step="0.01" value="{{ policy.premium_amount }}" required>
        </div>
        <div>
            <label for="start_date">Start Date:</label>
            <input type="date" id="start_date" name="start_date" value="{{ policy.start_date }}" required>
        </div>
        <div>
            <label for="end_date">End Date:</label>
            <input type="date" id="end_date" name="end_date" value="{{ policy.end_date }}" required>
        </div>
        <div>
            <label for="status">Status:</label>
            <select id="status" name="status">
                <option value="Active" {% if policy.status == 'Active' %}selected{% endif %}>Active</option>
                <option value="Pending" {% if policy.status == 'Pending' %}selected{% endif %}>Pending</option>
                <option value="Expired" {% if policy.status == 'Expired' %}selected{% endif %}>Expired</option>
                <option value="Cancelled" {% if policy.status == 'Cancelled' %}selected{% endif %}>Cancelled</option>
            </select>
        </div>
        <button type="submit">Update Policy</button>
        <a href="{{ url_for('view_policy', policy_id=policy.id) }}" class="button">Cancel</a>
    </form>
    <style>
        .button {
            background-color: #6c757d; /* Grey for cancel */
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            text-decoration: none;
            display: inline-block;
            margin-left: 10px;
        }
        .button:hover { background-color: #5a6268; }
    </style>
{% endblock %}